<%= stylesheet_link_tag 'new', :media => "all" %>
<br>
<h2>入力フォーム</h2>
<br>
<div class="post-container">
  <h1>書籍の新規登録</h1>
  <%= form_tag('booksearch', method: :get) do %>
    <div class="input-group">
      <%= search_field_tag "keyword", params[:keyword], class: "form-control", placeholder: "キーワード検索" %>
        <span class="input-group-btn">
          <%= submit_tag "検索", class: "btn btn-primary" %>
        </span>
    </div>
   <% end %>
  <h2>検索結果</h2>
  <% if @books.present? %>
    <% @books.each do |book| %>
       <img src="<%= book[1] %>" width="40" vspace="2">
       <%= link_to book[0], controller: "books", action: "new", title: book[0], author: book[2], img: book[1] %>
      <%= book[2] %> | 
    <% end %>
  <% end %>
  <br>
  <br>
  <%= form_with scope: :book, url: books_path, local: true do |form| %>
  <%= form.label :本のタイトル %>
  <%= form.text_field :title, class: 'form-control', value: "#{@title}" %>
  <br>
  <br>
  <%= form.label :著者 %>
  <%= form.text_field :author, class: 'form-control', value: "#{@author}" %>
  <p><%= @img %></p>
  <%= form.hidden_field :image, class: 'form-control', value: "#{@img}" %>
  <br>
  <br>
  <div class="field">
    <%= form.label :category, "本のカテゴリー" %>
    <%= form.select :category, 
    [["自己啓発", "自己啓発"], 
    ["文学・評論", "文学・評論"],
    ["ビジネス・経済","ビジネス・経済"],
    ["歴史・地理", "歴史・地理"] ,
    ["政治・社会", "政治・社会"],
    ["芸能・エンターテイメント", "芸能・エンターテイメント"],
    ["アート・建築・デザイン", "アート・建築・デザイン"],
    ["人文・思想・宗教", "人文・思想・宗教"],
    ["暮らし・健康・料理", "暮らし・健康・料理"],
    ["サイエンス・テクノロジー", "サイエンス・テクノロジー"],
    ["趣味・実用", "趣味・実用"],
    ["旅行・紀行", "旅行・紀行"],
    ["学習参考書", "学習参考書"],
    ["コミックス", "コミックス"],
    ["その他", "その他"]], include_blank: "選択して下さい" %>
  </div>
  <br>
  <br>
  <div class="field">
    <%= form.label :本の画像 %>
    <%# <%= form.file_field :image %> 
  </div>
  <br>
  <div class="field">
    <%= form.label :どんな本？（一言で！） %>
    <%= form.text_field :learn,size: 140 %>
  </div>
  <br>
  <div class="field">
    <%= form.label :この本から学んだこと %><br>
    <%= form.text_area :about,class: "hoge", size: "140x6" %>
  </div>
  <br>
  <h3>総合評価</h3>
  <div class= "star-rating">
   <div class="post_form">
    <%= form.radio_button :overrall, 5 ,id: 'star1'%>
    <label for="star1"><span class="text">感動した</span>★</label>

    <%= form.radio_button :overrall, 4 ,id: 'star2'%>
    <label for="star2"><span class="text">イイネ！</span>★</label>

    <%= form.radio_button :overrall, 3 ,id: 'star3'%>
    <label for="star3"><span class="text">まあまあ</span>★</label>

    <%= form.radio_button :overrall, 2 ,id: 'star4'%>
    <label for="star4"><span class="text">うーん。</span>★</label>

    <%= form.radio_button :overrall, 1 ,id: 'star5'%>
    <label for="star5"><span class="text">最悪。</span>★</label>
    </div>
  </div>
    <br>
    <br>
    <br>
    <div class= "evaluation">
       <p class="starevaliation">
       ★・・・最悪だった。読まなくていいと思う。<br>
       ★★・・・うーん。いまいちかな。そんなにオススメはしない。<br>
       ★★★・・・まあまあ良かった。気になったら読んでみて〜<br>
       ★★★★・・・イイネ！出来れば読んでほしいな〜<br>
       ★★★★★・・・感動した、、！全人類に読んで欲しい！！！<br>
       </p>
    <br>
    </div>
  <%= form.submit "本を投稿する" %>
  <br>
  <br>
  <br>
  <% end %>
  <%= link_to "本の一覧に戻る", books_path %>
  <script src="https://cdn.jsdelivr.net/npm/bubbly-bg@1.0.0/dist/bubbly-bg.js"></script>
  <script>bubbly({
  colorStart: '#fff4e6',
  colorStop: '#ffe9e4',
  blur:1,
  compose: 'source-over',
  bubbleFunc:() => `hsla(${Math.random() * 50}, 100%, 50%, .3)`});</script>
</div>
